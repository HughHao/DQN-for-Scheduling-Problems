# Python implementation of PSO for FJSP.
"""
Reinforcement learning maze example.

Red rectangle:          explorer.
Black rectangles:       hells       [reward = -1].
Yellow bin circle:      paradise    [reward = +1].
All other states:       ground      [reward = 0].

This script is the main part which controls the update method of this example.
The RL is in RL_brain.py.

View more on my tutorial page: https://morvanzhou.github.io/tutorials/
"""
######### 数据集解析 ########
#JSP示例
# 2 3 1
# 2 2 1 3 2 4 3 1 2 2 1 3 7
# 3 1 2 8 1 3 5 1 1 10

#第一行表示2个工件，共3个设备，平均每道工序1个可用设备
#第二三行表示串行工艺路线，包含多道工序，每道工序包含多个设备与加工时间
#以第二行为例，第一个2表示该工件共2个工序；第二个2表示第一个工序有2个可用设备，（1,3）表示设备1的工时为3，
#（2,4）表示设备2的工时为4；接下来是3表示第二道工序有3个可用设备，以此类推。
######### 运行 ########
python run_this.py --episode=1000

######### Q表 ########
episode 24
RL[0]                                               0          1          2          3          4          5       stayIdle
[[3, 1, 5], [0, 1, 3]]                          13.194240   0.000000   0.000000   8.100742   0.000000   0.000000   8.196000
[[3, 1, 5], [5, 3, 10]]                          0.000000   0.000000   0.000000   7.120000   0.000000   8.586978  15.414901
[[5, 3, 10]]                                     0.000000   0.000000   0.000000   0.000000   0.000000  22.052331  33.645737
[]                                               0.000000   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[[1, 4, 10]]                                     0.000000  11.544138   0.000000   0.000000   0.000000   0.000000  24.058451
[[2, 3, 9]]                                      0.000000   0.000000  19.682771   0.000000   0.000000   0.000000  30.344839
[[4, 4, 3]]                                      0.000000   0.000000   0.000000   0.000000  14.396624   0.000000  19.725022
[[3, 1, 5]]                                      0.000000   0.000000   0.000000  20.625405   0.000000   0.000000  30.748672
[[4, 4, 3], [5, 3, 10]]                          0.000000   0.000000   0.000000   0.000000   0.000000   2.900000   3.800000
[[4, 4, 3], [1, 4, 10]]                          0.000000   5.539529   0.000000   0.000000   0.000000   0.000000   0.000000
[[0, 1, 3]]                                     27.865222   0.000000   0.000000   0.000000   0.000000   0.000000  30.115491
[[2, 3, 9], [4, 4, 3]]                           0.000000   0.000000   0.000000   0.000000   5.768320   0.000000   3.090000
[[3, 1, 5], [2, 3, 9]]                           0.000000   0.000000   6.116400   9.373323   0.000000   0.000000   3.000000
[[3, 1, 5], [5, 3, 10], [1, 4, 10]]              0.000000   2.600000   0.000000   0.000000   0.000000   0.000000   0.000000
[[3, 1, 5], [4, 4, 3]]                           0.000000   0.000000   0.000000   1.713600   4.482689   0.000000   0.000000
[[0, 1, 3], [3, 1, 5]]                           4.100800   0.000000   0.000000   4.668946   0.000000   0.000000   0.000000
[[0, 1, 3], [2, 3, 9]]                           3.748800   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[[1, 4, 10], [4, 4, 3]]                          0.000000   4.055774   0.000000   0.000000   2.884160   0.000000   3.100000
[[1, 4, 10], [2, 3, 9]]                          0.000000   0.000000   4.357744   0.000000   0.000000   0.000000   0.000000
[[5, 3, 10], [2, 3, 9]]                          0.000000   0.000000   4.718357   0.000000   0.000000   3.576000   8.640000
[[5, 3, 10], [2, 3, 9], [3, 1, 5], [1, 4, 10]]   0.000000   3.400000   0.000000   0.000000   0.000000   0.000000   0.000000
[[5, 3, 10], [2, 3, 9], [3, 1, 5], [4, 4, 3]]    0.000000   0.000000   2.500000   0.000000   0.000000   0.000000   0.000000
[[5, 3, 10], [3, 1, 5], [4, 4, 3]]               0.000000   0.000000   0.000000   0.000000   2.300000   0.000000   0.000000
[[5, 3, 10], [3, 1, 5]]                          0.000000   0.000000   0.000000   2.974894   0.000000   0.000000   0.000000
[[0, 1, 3], [5, 3, 10]]                         13.970312   0.000000   0.000000   0.000000   0.000000   8.193613   0.000000
[[2, 3, 9], [1, 4, 10]]                          0.000000   9.459858   2.404755   0.000000   0.000000   0.000000   2.200000
[[4, 4, 3], [2, 3, 9]]                           0.000000   0.000000   1.626333   0.000000   5.055065   0.000000   4.750000
[[4, 4, 3], [2, 3, 9], [1, 4, 10]]               0.000000   0.000000   2.000000   0.000000   0.000000   0.000000   2.800000
[[5, 3, 10], [0, 1, 3], [4, 4, 3]]               0.000000   0.000000   0.000000   0.000000   3.500000   0.000000   0.000000
[[5, 3, 10], [0, 1, 3]]                          0.000000   0.000000   0.000000   0.000000   0.000000   3.987103   0.000000
[[2, 3, 9], [5, 3, 10]]                          0.000000   0.000000   3.178175   0.000000   0.000000   5.180879   0.000000
[[3, 1, 5], [1, 4, 10]]                          0.000000   6.688841   0.000000   3.553742   0.000000   0.000000   0.000000
[[3, 1, 5], [5, 3, 10], [4, 4, 3]]               0.000000   0.000000   0.000000   2.500000   0.000000   0.000000   0.000000
[[5, 3, 10], [4, 4, 3]]                          0.000000   0.000000   0.000000   0.000000   0.000000   6.237629   2.500000
[[3, 1, 5], [0, 1, 3], [5, 3, 10]]               0.000000   0.000000   0.000000   3.600000   0.000000   3.148059   3.100000
[[0, 1, 3], [4, 4, 3]]                           0.000000   0.000000   0.000000   0.000000   4.647718   0.000000   0.000000
makespan 86

